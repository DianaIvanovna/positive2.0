[<-назад](/README.md)


# Методы API

## Работа с турами

### Получить туры
POST-запрос на адрес /wp-json/pozitiv/v1/tour/get/  
Если вызвать без параметров - вернет список всех туров.  
Параметры:  
- id        ID требуемого тура  
- season    Фильтр по турам summer | winter

Вернет список туров с поездками поездки с перечнем допуслуг


## Работа с Заказами 

### Создание заказа
POST-запрос на адрес /wp-json/pozitiv/v1/order/create/  
Очищает телефон от лишних символов, проверяет валидность написания почты, проверяет валидность переданного json.  
Попытается найти существующего пользователя по e-mail если не найдет - создаст нового.  
Параметры:
- tourID            - ID тура, обязательный
- tripID            - ID поездки, обязательный
- phoneOwner        - телефон владельца заказа, обязательный
- emailOwner        - почта владельца заказа, обязательный
- firstNameOwner    - имя владельца заказа, не обязательный
- lastNameOwner     - фамилия владельца заказа, не обязательный
- messageClient     - сообщение от заказчика, не обязательный
- data              - данные заказа, json-строка. [Структура данных заказа](api-structures.md#orderStructure)

В случае успеха вернет: {result:1, order:{объект_заказа}}


### Получить свои заказы
POST-запрос на адрес /wp-json/pozitiv/v1/order/getmy/  
Авторизованному pozitiv-пользователю вернет список объектов заказов текущего пользователя.  
Параметров нет.  
В случае успеха вернет: {"result":1,"orders":[объекты_заказов]}


## Работа с пользователем

### Авторизоваться
POST-запрос на адрес /wp-json/pozitiv/v1/user/login/  
Авторизует пользователя в системе.  
Параметры:  
- login     - логин или почта пользователя в системе
- pass      - пароль пользователя

В случае успеха вернет: {result:1, user:{объект_пользователя}}


### Выйти из профиля
POST-запрос на адрес /wp-json/pozitiv/v1/user/logout/  
Параметров нет.  

В случае успеха вернет: {result:1}